# h4 No Strings Attached

Kotitehtävä h3 No Strings Attached Tero Karvisen & Lari Iso-Anttilan Sovellusten hakkerointi ja haavoittuvuudet 2026 kevät -kurssille. [Linkki kurssisivulle](https://terokarvinen.com/application-hacking/)
Jokaisessa kohdassa on alla olevalla "quote" tyylillä kerrottu tehtävänanto.
>Liirum laarum laa...


## x

## a
> Install Ghidra

Asensin Ghidran komennolla ``sudo apt install ghidra`. 

![alt text](image.png)

## b
> rever-C. Reverse engineer the packd binary to C language with Ghidra. Find the main program. Give variables descriptive names. Explain the program's operation. Solve the task from the binary, without the original source code. ezbin-challenges.zip

Asensin binäärin ja unzippasin sen:

    wget https://terokarvinen.com/loota/yctjx7/ezbin-challenges.zip
    unzip ezbin-challenges.zip 

Tämän jälkeen menin packd kansioon ja unpackasin sen upx avulla. Teom varmuuden vuoksi kopion alkuperäisestestä jota ei ole unpackattu.

    cd /challenges/packd
    cp packd packdunpacked
    upx -d packd 

![alt text](image-1.png)

Seuraavaksi avasin Ghidran `ghidra` ja tein uuden projektin.

Vasemmasta yläkulmasta file --> New Project

![alt text](image-2.png)

![alt text](image-3.png)

![alt text](image-4.png)

Tämän jälkeen importasin packd kyseiseen projektiin

File --> Import file 

![alt text](image-5.png)

Seuraavaksi tuplaklikkasin packd tiedostoa.

![alt text](image-6.png)

Analysoin tiedoston

![alt text](image-7.png)

Ja nyt pääsin itse katsomaan binäärin koodia.

![alt text](image-8.png)

Lähdin etsimään main funktiota. Klikkasin vasemmalta Exports

![alt text](image-9.png)

Sieltä löytyi main, klikkasin sitä ja isonsin Decompile näyttöä, jotta koodi näkyisi enemmän lueattavassa C muodossa eikä assemblyssa.

![alt text](image-10.png)

Seuraavaksi muutin kahden muuttujien nimet: `passowrd comparison, user_input`. Näin ainaskin itselle tästä tulee loogisempi.

![alt text](image-11.png)

- Aluksi tehdään kaksi muuttujaa ``int password_comparison`` sekä `char user_input [32]`. Numero 32 kertoo kuinka monta kirjainta user_input hyväksyy
- Tämän jälkeen ohjelma printtaa `whats the password`
- Ohjelma kysyy käyttäjältä inputtia
- muuttujalle password_comparison annetaan arvo. Tämä riippuu siitä minkä arvon `strcmp`, eli string comparison antaa. Strcmp vertaa kahta stringia, user_input sekä kovakoodattua salasanaa `piilos-AnAnAs`. Jos salasanat ovat samat, antaa se arvon 0 ja jos ei niin antaa se toisen arvon.
- Sitten ohjelma loppuu if lauseeseen.
- Jos salasanat olivat samat, printtaa ohjelma salasanan sekä flagin
- Jos ei niin  printtaa toisen tekstin

Ghidran avulla näimme kovakoodatun salasanan ja saimme flagin ohjelmasta. Samalla testasin ohjelman toimivuutta muutamalla typolla. VIimeisessä esimerkissä ohjelma ei suostunut antamaan flagia, koska käytin kyrillista o-kirjainta.

![alt text](image-12.png)

## c
> If backwards. Modify the passtr program's binary (without the original source code) so that it accepts all passwords except the correct one. Demonstrate with tests that the program works. ezbin-challenges.zip

Lisäsin passtr ohjelman Ghidraan.

![alt text](image-13.png)

Tämän jälkeen tein samanlailla kuin b) osassa, eli avasin sen ja analysoin sen. Tämän jälkeen etsin taas exporteista main funktiota ja se löytyi.

![alt text](image-14.png)

Ohjelma toimii samanlailla kuin b osan tehtävä. Jotta ohjelma hyväksyy kaikki muut paitsi oikean, muutamme vain `iVar1 == 0 --> iVar1 != 0`. 

## d
>Nora CrackMe: Compile to binaries Tindall 2023: NoraCodes / crackmes. Read README.md: don't look at the source code unless you need training wheels. In these tasks, binaries are reverse engineered. Binaries are not modified, because otherwise the solution to every task would be to change the return value to "return 0".

Latasin Crackme git kansion `git clone https://github.com/NoraCodes/crackmes.git`

Tämän jälkeen menin crackme kansioon ja suoritin komennon "make" joka teki jokaisesta crackme filestä suoritetavan .64 tiedoston.

![alt text](image-15.png)

