# h6 Hardware Hacking

Kotitehtävä h6 Hardware Hacking Tero Karvisen & Lari Iso-Anttilan Sovellusten hakkerointi ja haavoittuvuudet 2026 kevät -kurssille. [Linkki kurssisivulle](https://terokarvinen.com/application-hacking/)
Jokaisessa kohdassa on alla olevalla "quote" tyylillä kerrottu tehtävänanto.
>Liirum laarum laa...

## x

Sain tunnilla asennettua tp link decrypt -sovelluksen ja sen kanssa oli hieman säätöä, joten ajattelin tehdä ihan oman kohdan asennukselle. Troubleshoottaamisessa käytetty apuna Gemini 3 Pro tekoälyä. 

Cloonasin repon,

    git clone https://github.com/robbins/tp-link-decrypt
    cd tp-link-decrypt

![alt text](image.png)

    ./preinstall.sh

![alt text](image-1.png)

    ./extract_keys.sh

![alt text](image-2.png)

Yes

Nyt `make` pitäisi toimia, mutta näin ei ollut vaan tuli openssl error.

![alt text](image-3.png)

Ladataan `libssl-dev` paketti ja asennetaan se `sudo apt update && sudo apt install libssl-dev`

Tämän jälkeen `make clean` ja `make`. Seuraavaksi tuli tällainen errori.

![alt text](image-4.png)

Tämä errori johtuu siitä, että kone yrittää compileta vanhempaa koodia uudemmalla systeemilla. Tätä varten Makefile tiedostosta, pitää lisätä CFLAGS kohtaan `-std=gnu89`.

![alt text](image-5.png)

![alt text](image-6.png)

Seuraavaksi `make clean sekä make`

![alt text](image-7.png)

Nyt työkalun pitäisi toimia. 

## 1 & 2 & (4)
> Decrypt firmware image
> Analyse the image file
> extract rootfs from the image file

Tein tämän viikon tehtävää varten kahdet eri kansiot, dump ja image jotta dump ja image filet eivät mene sekaisin.

Latasin TPlink firmware imagen.

![alt text](image-9.png)

Koitin katsoa strings:n avulla jos tästä .bin saisi jotain irti, mutta en saanut. Koitin myös avata tätä Ghidran kanssa, mutta se ei tunnistanut kieltä joten sen enempää en saanut tietoa ilman decryptaamista

![alt text](image-12.png)

Tämän jälkeen decryptasin sen asennetulla työkalulla ja sain ``.bin.dec `` tiedoston

![alt text](image-10.png)

Ja tämän jälkeen käytin vielä binwalkkia avaamaan tämän.

`binwalk -e Tapo_C200v4_en_1.4.2.bin.dec`

Tämä teki `_Tapo_C200v4_en_1.4.2.bin.dec.extracted` kansion

![alt text](image-11.png)

## 3
> extract rootfs from the dump file

Latasin Moodlesta dump filen. Muistan tunnilta tehdessäni jo tätä tehtävää, että tähän ei pidä käyttää tp-link-decrypttia, joten käytin tässä samaa binwalk -e komentoa kuin firmware imagessa.

## 5 & 6
> search available applications
> analyse and try to open root password

Koitin aluksi katsoa squashfs-root kansion sisältöä. Täältä ei löytynyt mitään ja se näytti vähän vajaalta, esimerkiksi siellä ei ollu shadow tiedostoa.

![alt text](image-13.png)

Katsoin grep:n avulla jos se löytäisi merkkijonon `root` ja se löysi muutaman tiedoston

![alt text](image-14.png)

Koitin katsoa kansiota ja tiedostoja läpi, mutta en saanut mitään löydettyä.

Tämä tehtävä jäi hieman kesken, kun oli aika kiireinen viikko. Tulen täydentämään tehtävän myöhemmin.

# Lähteet
- Kurssisivu https://terokarvinen.com/application-hacking/
- Gemini 3 Pro 
